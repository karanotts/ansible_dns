key "{{ dns_key_name }}" {
  algorithm hmac-md5;
  secret "{{ dns_key_secret }}";
};

{% for domain_zone in domain_zones %}

zone {{ domain_zone.name }} {
{% if domain_zone.type == "master" %} 
  type master;
{% elif domain_zone.type == "slave" %} 
  type slave;
  masters {
  {{ domain_zone.master }};
  };
{% endif %}
  file "{{ zones_dir }}/db.{{ domain_zone.name }}";
  allow-update { key "{{ dns_key_name }}"; };
};

zone "{{ domain_zone.reverse }}.in-addr.arpa" {
{% if domain_zone.type == "master" %}
  type master;
{% elif domain_zone.type == "slave" %}
  type slave;
  masters {
  {{ domain_zone.master }};
  };
{% endif %}
  file "{{ zones_dir }}/db.{{ domain_zone.reverse }}";
  allow-update { key "{{ dns_key_name }}."; };
};
{% endfor %}
